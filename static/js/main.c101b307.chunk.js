(this.webpackJsonptstodolist=this.webpackJsonptstodolist||[]).push([[0],{126:function(t,e,a){},127:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),i=a(8),c=a.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(17),s=a(27),r=a(23),d=a(47),u=a(20),f=Object(s.b)({name:"todolist",initialState:[],reducers:{removeTodolistAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));a>-1&&t.splice(a,1)},addTodolistAC:function(t,e){t.unshift(Object(u.a)(Object(u.a)({},e.payload.todolist),{},{filter:"All",entityStatus:"idle"}))},changeTodoTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].title=e.payload.changeTitle},changeTodoListFilterAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].filter=e.payload.filterValue},setTodolistsAC:function(t,e){return e.payload.todolists.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{filter:"All",entityStatus:"idle"})}))},changeTodolistEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].entityStatus=e.payload.status}}}),m=f.reducer,p=f.actions,g=p.removeTodolistAC,b=p.addTodolistAC,h=p.changeTodoTitleAC,k=p.changeTodoListFilterAC,C=p.setTodolistsAC,E=p.changeTodolistEntityStatusAC,v=Object(s.b)({name:"todolist",initialState:{},reducers:{removeTasksAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&a.splice(n,1)},addTasksAC:function(t,e){t[e.payload.task.todoListId].unshift(e.payload.task)},updateTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(u.a)(Object(u.a)({},a[n]),e.payload.model))},changeTitleTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(u.a)(Object(u.a)({},a[n]),{},{title:e.payload.newTitleTask}))},setTasksAC:function(t,e){t[e.payload.todolistId]=e.payload.tasks}},extraReducers:function(t){t.addCase(b,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(g,(function(t,e){delete t[e.payload.id]})),t.addCase(C,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))}))}}),T=v.reducer,j=v.actions,O=j.removeTasksAC,y=j.addTasksAC,A=j.updateTaskAC,I=(j.changeTitleTaskAC,j.setTasksAC),w=Object(s.b)({name:"app",initialState:{status:"loading",error:null,initialized:!1},reducers:{setStatusAC:function(t,e){t.status=e.payload.status},setErrorAC:function(t,e){t.error=e.payload.error},setAppInitializedAC:function(t,e){t.initialized=e.payload.init}}}),S=w.reducer,L=w.actions,x=L.setStatusAC,N=L.setErrorAC,F=L.setAppInitializedAC,P=Object(s.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),D=P.reducer,V=P.actions.setIsLoggedInAC,z=Object(r.c)({todolists:m,tasks:T,app:S,auth:D}),M=Object(s.a)({reducer:z,middleware:function(t){return t().prepend(d.a)}});window.store=M;var q,B,H=a(170),R=a(171),U=a(172),Z=a(163),J=a(129),K=a(166),W=a(174),$=a(175),Y=a(173),_=a(167),G=a(128),Q=a(45),X=a(176),tt=a(164),et=o.a.memo((function(t){var e=t.addNewItem,a=t.disabled;console.log("AddNewItemComponent render");var i=Object(n.useState)(""),c=Object(Q.a)(i,2),l=c[0],s=c[1],r=Object(n.useState)(null),d=Object(Q.a)(r,2),u=d[0],f=d[1],m=function(){""!==l.trim()?(e(l),s("")):f("Title is required")};return o.a.createElement("div",null,o.a.createElement(X.a,{variant:"outlined",error:!!u,value:l,onChange:function(t){s(t.currentTarget.value)},onKeyPress:function(t){null!==u&&f(null),13===t.charCode&&m()},label:"Enter text",helperText:u,disabled:a}),o.a.createElement(Z.a,{onClick:m,color:"primary",disabled:a},o.a.createElement(tt.a,null)))})),at=a(87),nt=o.a.memo((function(t){console.log("ChangeTitleNameComponent render");var e=Object(n.useState)(!1),a=Object(Q.a)(e,2),i=a[0],c=a[1],l=Object(n.useState)(""),s=Object(Q.a)(l,2),r=s[0],d=s[1];return i?o.a.createElement(X.a,{value:r,onBlur:function(){c(!1),t.onChange(r)},autoFocus:!0,onChange:function(t){d(t.currentTarget.value)}}):o.a.createElement("span",{onDoubleClick:function(){c(!0),d(t.changeTitleValue)}},t.changeTitleValue)})),ot=a(165),it=a(178);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(q||(q={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.High=2]="High",t[t.Urgent=3]="Urgent",t[t.Later=4]="Later"}(B||(B={}));var ct=o.a.memo((function(t){var e=Object(n.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.todolistId)}),[t.changeTaskTitle,t.task.id,t.todolistId]);return o.a.createElement("li",{key:t.task.id,className:t.task.status===q.Completed?"is-done":""},o.a.createElement(it.a,{color:"primary",onChange:function(e){var a=e.currentTarget.checked;t.changeTaskStatus(t.task.id,a?q.Completed:q.New,t.todolistId)},checked:t.task.status===q.Completed}),o.a.createElement(nt,{changeTitleValue:t.task.title,onChange:e}),o.a.createElement(Z.a,{onClick:function(){return t.removeTask(t.task.id,t.todolistId)}},o.a.createElement(ot.a,null)))})),lt=a(83),st=a.n(lt).a.create(Object(u.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"b61c59bc-c21c-4a07-9ff4-5b299b2d5ced"}})),rt=function(t){return st.get("todo-lists/".concat(t,"/tasks"))},dt=function(t,e){return st.post("todo-lists/".concat(e,"/tasks"),{title:t})},ut=function(t,e){return st.delete("todo-lists/".concat(e,"/tasks/").concat(t))},ft=function(t,e,a){return st.put("todo-lists/".concat(a,"/tasks/").concat(t),e)},mt=function(t,e){t.messages.length?e(N({error:t.messages[0]})):e(N({error:"some error"})),e(x({status:"failed"}))},pt=function(t,e){e(N(t.message?t.message:"some error occurred")),e(x({status:"succeeded"}))},gt=function(t,e,a){return function(n,o){var i=o().tasks[a].find((function(e){return e.id===t}));if(i){var c=Object(u.a)({title:i.title,description:i.description,status:i.status,completed:i.completed,priority:i.priority,startDate:i.startDate,deadline:i.deadline},e);n(x({status:"loading"})),ft(t,c,a).then((function(o){0===o.data.resultCode?(n(A({taskId:t,model:e,todolistId:a})),n(x({status:"succeeded"}))):mt(o.data,n)})).catch((function(t){pt(t,n)}))}}},bt=o.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,i=Object(at.a)(t,["demo"]);console.log(" TodoList render");var c=Object(l.b)();Object(n.useEffect)((function(){var t;a||(console.log("log  "+i.todolist.id),c((t=i.todolist.id,function(e){e(x({status:"loading"})),rt(t).then((function(a){e(I({tasks:a.data.items,todolistId:t})),e(x({status:"succeeded"}))})).catch((function(t){pt(t,e)}))})))}),[]);var s=Object(n.useCallback)((function(t){i.addNewTask(t,i.todolist.id)}),[i.addNewTask,i.todolist.id]),r=Object(n.useCallback)((function(){i.changeFilterTodoist(i.todolist.id,"All")}),[i.changeFilterTodoist,i.todolist.id]),d=Object(n.useCallback)((function(){i.changeFilterTodoist(i.todolist.id,"Active")}),[i.changeFilterTodoist,i.todolist.id]),u=Object(n.useCallback)((function(){i.changeFilterTodoist(i.todolist.id,"Completed")}),[i.changeFilterTodoist,i.todolist.id]),f=Object(n.useCallback)((function(t){i.changeTodoListTitle(i.todolist.id,t)}),[i.changeTodoListTitle,i.todolist.id]),m=i.tasks;return"Active"===i.todolist.filter&&m.filter((function(t){return t.status===q.New})),"Completed"===i.todolist.filter&&m.filter((function(t){return t.status===q.Completed})),o.a.createElement("div",null,o.a.createElement("h3",null,o.a.createElement(nt,{changeTitleValue:i.todolist.title,onChange:f}),o.a.createElement(Z.a,{onClick:function(){i.removeTodoList(i.todolist.id)},disabled:"loading"===i.todolist.entityStatus},o.a.createElement(ot.a,null))),o.a.createElement(et,{addNewItem:s,disabled:"loading"===i.todolist.entityStatus}),o.a.createElement("ul",null,i.tasks.map((function(t){return o.a.createElement(ct,{task:t,changeTaskStatus:i.changeTaskStatus,changeTaskTitle:i.changeTaskTitle,removeTask:i.removeTask,todolistId:i.todolist.id,key:t.id})}))),o.a.createElement("div",null,o.a.createElement(K.a,{variant:"All"===i.todolist.filter?"contained":"text",onClick:r,color:"inherit"},"All"),o.a.createElement(K.a,{variant:"Active"===i.todolist.filter?"contained":"text",onClick:d,color:"primary"},"Active"),o.a.createElement(K.a,{variant:"Completed"===i.todolist.filter?"contained":"text",onClick:u,color:"secondary"},"Completed")))})),ht=a(13),kt=function(){return st.get("todo-lists")},Ct=function(t){return st.post("todo-lists",{title:t})},Et=function(t){return st.delete("todo-lists/".concat(t))},vt=function(t,e){return st.put("todo-lists/".concat(t),{title:e})},Tt=function(t){var e=t.demo,a=void 0!==e&&e,i=Object(l.b)(),c=Object(l.c)((function(t){return t.todolists})),s=Object(l.c)((function(t){return t.tasks})),r=Object(l.c)((function(t){return t.auth.isLoggedIn}));Object(n.useEffect)((function(){!a&&r&&i((function(t){t(x({status:"loading"})),kt().then((function(e){t(C({todolists:e.data})),t(x({status:"succeeded"}))})).catch((function(e){pt(e,t)}))}))}),[r]);var d=Object(n.useCallback)((function(t,e){i(function(t,e){return function(a){a(x({status:"loading"})),ut(t,e).then((function(){a(O({taskId:t,todolistId:e})),a(x({status:"succeeded"}))})).catch((function(t){pt(t,a)}))}}(t,e))}),[]),u=Object(n.useCallback)((function(t,e){var a,n;i((a=t,n=e,function(t){t(x({status:"loading"})),dt(a,n).then((function(e){0===e.data.resultCode?(t(y({task:e.data.data.item})),t(x({status:"succeeded"}))):mt(e.data,t)})).catch((function(e){pt(e,t)}))}))}),[]),f=Object(n.useCallback)((function(t,e,a){i(gt(t,{status:e},a))}),[]),m=Object(n.useCallback)((function(t,e,a){i(gt(t,{title:e},a))}),[]),p=Object(n.useCallback)((function(t,e){i(k({id:t,filterValue:e}))}),[]),v=Object(n.useCallback)((function(t){var e;i((e=t,function(t){t(x({status:"loading"})),t(E({id:e,status:"loading"})),Et(e).then((function(){t(g({id:e})),t(x({status:"succeeded"}))})).catch((function(e){pt(e,t)}))}))}),[]),T=Object(n.useCallback)((function(t,e){var a,n;i((a=t,n=e,function(t){t(x({status:"loading"})),vt(a,n).then((function(){t(h({id:a,changeTitle:n})),t(x({status:"succeeded"}))})).catch((function(e){pt(e,t)}))}))}),[]),j=Object(n.useCallback)((function(t){i(function(t){return function(e){e(x({status:"loading"})),Ct(t).then((function(t){e(b({todolist:t.data.data.item})),e(x({status:"succeeded"}))})).catch((function(t){pt(t,e)}))}}(t))}),[]);return r?o.a.createElement(o.a.Fragment,null,o.a.createElement(_.a,{container:!0,style:{padding:"20px"}},o.a.createElement(et,{addNewItem:j})),o.a.createElement(_.a,{container:!0,spacing:3},c.map((function(t){var e=s[t.id],n=e;return"Active"===t.filter&&(n=e.filter((function(t){return t.status===q.New}))),"Completed"===t.filter&&(n=e.filter((function(t){return t.status===q.Completed}))),o.a.createElement(_.a,{item:!0},o.a.createElement(G.a,{style:{padding:"10px"}},o.a.createElement(bt,{key:t.id,todolist:t,tasks:n,removeTask:d,changeFilterTodoist:p,addNewTask:u,changeTaskStatus:f,changeTaskTitle:m,removeTodoList:v,changeTodoListTitle:T,demo:a})))})))):o.a.createElement(ht.a,{to:"/auth"})},jt=a(181),Ot=a(162),yt=a(168),At=a(169),It=a(86),wt=function(t){return st.post("auth/login",t)},St=function(){return st.get("auth/me")},Lt=function(){return st.delete("auth/login")},xt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth.isLoggedIn})),a=Object(It.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={email:"",password:""};t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Don't forget @ and enter domain data "):e.email="Email address is required",t.password?t.password&&(e.password=""):e.password="Password is required"},onSubmit:function(e){var a;t((a=e,function(t){t(x({status:"loading"})),wt(a).then((function(e){0===e.data.resultCode?(t(V({value:!0})),t(x({status:"succeeded"}))):mt(e.data,t)})).catch((function(e){pt(e,t)}))}))}});return e?o.a.createElement(ht.a,{to:"/"}):o.a.createElement(_.a,{container:!0,justify:"center"},o.a.createElement(_.a,{item:!0,xs:4},o.a.createElement("form",{onSubmit:a.handleSubmit},o.a.createElement(jt.a,null,o.a.createElement(Ot.a,null,o.a.createElement("p",null,"Email: free@samuraijs.com"),o.a.createElement("p",null,"Password: free")),o.a.createElement(yt.a,null,o.a.createElement(X.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?o.a.createElement("div",null,a.errors.email):null,o.a.createElement(X.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?o.a.createElement("div",null,a.errors.password):null,o.a.createElement(At.a,Object.assign({label:"Remember me",control:o.a.createElement(it.a,null)},a.getFieldProps("rememberMe"))),o.a.createElement(K.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},Nt=a(180),Ft=a(177),Pt=function(t){return o.a.createElement(Ft.a,Object.assign({elevation:6,variant:"filled"},t))},Dt=function(){var t=Object(l.b)(),e=function(e,a){"clickaway"!==a&&t(N({error:null}))},a=Object(l.c)((function(t){return t.app.error})),n=null!==a;return o.a.createElement(Nt.a,{open:n,autoHideDuration:3e3,onClose:e},o.a.createElement(Pt,{onClose:e,severity:"error"},a))},Vt=a(52),zt=function(t){var e=t.demo,a=void 0!==e&&e;console.log("App render");var i=Object(l.c)((function(t){return t.app.status})),c=Object(l.c)((function(t){return t.app.initialized})),s=Object(l.c)((function(t){return t.auth.isLoggedIn})),r=Object(l.b)();Object(n.useEffect)((function(){r((function(t){St().then((function(e){0===e.data.resultCode&&(t(V({value:!0})),t(x({status:"succeeded"}))),t(F({init:!0})),t(x({status:"succeeded"}))}))}))}),[c]);var d=Object(n.useCallback)((function(){r((function(t){t(x({status:"loading"})),Lt().then((function(e){0===e.data.resultCode?(t(V({value:!1})),t(x({status:"succeeded"}))):mt(e.data,t)})).catch((function(e){pt(e,t)}))}))}),[]);return c?o.a.createElement(Vt.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(Dt,null),o.a.createElement(R.a,{position:"static"},o.a.createElement(U.a,null,o.a.createElement(Z.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(Y.a,null)),o.a.createElement(J.a,{variant:"h6"},"Todolist APP"),s&&o.a.createElement(K.a,{color:"inherit",onClick:d},"Log out")),"loading"===i&&o.a.createElement(W.a,{color:"secondary"})),o.a.createElement($.a,{fixed:!0},o.a.createElement(ht.b,{path:"/",render:function(){return o.a.createElement(Tt,{demo:a})}}),o.a.createElement(ht.b,{exact:!0,path:"/auth",render:function(){return o.a.createElement(xt,null)}})))):o.a.createElement("div",{style:{position:"fixed",top:"50%",textAlign:"center",width:"100%"}},o.a.createElement(H.a,null))};a(126);c.a.render(o.a.createElement(l.a,{store:M},o.a.createElement(zt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},99:function(t,e,a){t.exports=a(127)}},[[99,1,2]]]);
//# sourceMappingURL=main.c101b307.chunk.js.map